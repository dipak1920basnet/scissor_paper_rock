<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style_files/style.css">
    <Script>
        function getComputerChoice()
        {
            let computer_choice = ["r","p","s"]
            let choice = computer_choice[Math.floor(Math.random()*computer_choice.length)];
            return choice;
        }

        function playround(human, computer){
            if (human == computer)
            {
                return "draw"
            }
            else{
                if((human == "s" && computer == "p") || (human == "p" && computer == "r")|| (human == "r" && computer == "s"))
                {
                    return "human";
                }
                else{
                    return "computer";
                }
            }
        }

        let human_score = 0;
        let computer_score = 0;
        let round = 0;
        let total_round = 5;

        function Playground(human_, computer_)
        {
            let check_score = playround(human_, computer_)
            if (check_score == "human")
            {
                human_score += 1;
            }
            else if (check_score == "computer")
            {
                computer_score +=1;
            }
            round += 1
        }

        function display()
        {
            let computerS_score = document.querySelector("#comp_score");
            let playerS_score = document.querySelector("#play_score");
            computerS_score.textContent = computer_score;
            playerS_score.textContent = human_score;
            let rounds = document.querySelector("#round-numbers");
            rounds.textContent = round;
        }
        document.addEventListener("DOMContentLoaded", ()=>{
            function getHumanChoice()
            {
                let human_choice = document.querySelectorAll(".player_choice")
                human_choice.forEach(button => {
                    button.addEventListener("click", function(){
                        const player_choice = this.value;
                        const bot_choice = getComputerChoice();

                        console.log(player_choice);

                        if (round < total_round)
                    {
                        let computer_move = document.querySelector("#bot_move")
                        computer_move.textContent = bot_choice;
                        Playground(player_choice, bot_choice);
                        display();
                        
                    }
                    else
                    {
                        let message = "click on restart button to play again"
                        if (human_score > computer_score)
                        {
                            alert("You won the game,"+ message)
                        }
                        else if (human_score == computer_score)
                        {
                            alert("The match is draw," + message)
                        }
                        else{
                            alert("Computer won the game," + message)
                        }

                    }
                       

                    })
                })
            }
            getHumanChoice();

            let reset = document.querySelector("#reset")
            reset.addEventListener("click", ()=>{
                human_score = 0;
                computer_score = 0;
                round = 0;
                display();
            })
        })
    </Script>
</head>
<body>
    <header>
        <section class="info">
           <div class="round-info">
                <div class="total_round">
                    <h1> Total Round: 5 </h1>
                </div>
                <div class="current_round">
                    <h1> Current Round: <span id="round-numbers">0</span> </h1>
                </div>
           </div>
        </section>
        <section class="game_setting">
            <div class="reset_game">
                <button id="reset"> Re-start game </button>
            </div>
        </section>
    </header>
    <main>
        <section class="Computer-section">
            <div class="computer_move">
                <h1> Computer moved: <span id="bot_move">None</span></h1>
            </div>
        </section>
        <section id="score">
            <div id="computer_score"> Computer_Score: <span id="comp_score">0</span> </div>
            <div id="player_score"> Player_Score: <span id="play_score"> 0</span> </div>
        </section>
        <section class="Player-section">
            <div class="player_options">
                <button class="player_choice" value="r" id="rock"> Rock </button>
                <button class="player_choice" value="p" id="paper"> Paper </button>
                <button class="player_choice" value="s" id="scissor"> Scissor </button>
            </div>
        </section>
    </main>
    <footer>

    </footer>
</body>
</html>